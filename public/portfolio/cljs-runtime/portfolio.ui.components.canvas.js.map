{"version":3,"sources":["portfolio/ui/components/canvas.cljs"],"mappings":"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","names":["portfolio.ui.components.canvas/get-iframe","canvas-el","G__44909","portfolio.ui.components.canvas/get-iframe-document","G__44910","portfolio.ui.components.canvas/get-iframe-body","G__44911","portfolio.ui.components.canvas/report-error","cause","e","scene","portfolio.ui.actions.dispatch","p__44912","map__44913","cljs.core/--destructure-map","cljs.core.get","portfolio.ui.components.canvas/render-scene","el","tools","opt","iframe","canvas","G__44914","error","seq__44915","cljs.core/seq","chunk__44916","count__44917","i__44918","temp__5804__auto__","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","tool","e44921","e44922","portfolio.ui.canvas.protocols/prepare-canvas","e44923","portfolio.adapter/render-component","cljs.core.assoc","fexpr__44924","js/setTimeout","seq__44925","chunk__44926","count__44927","i__44928","e44931","e44932","portfolio.ui.canvas.protocols/finalize-canvas","win","cljs.core/clj->js","cljs.core/namespace","cljs.core/name","cljs.core.remove","cljs.core/empty?","clojure.string.join","portfolio.ui.components.canvas/on-mounted","f","G__44933","_","doc","portfolio.ui.components.canvas/init-canvas","data","document","head","loaded","cljs.core.atom","target-n","try-complete","cljs.core/deref","cljs.core._EQ_","js/window.postMessage","seq__44934","chunk__44935","count__44936","i__44937","path","link","js/document.createElement","cljs.core.swap_BANG_","cljs.core/inc","seq__44938","chunk__44939","count__44940","i__44941","vec__44942","cljs.core.nth","t","r","b","l","p__44945","map__44946","portfolio.ui.components.canvas/get-rendered-data","portfolio.ui.components.canvas/process-render-queue","portfolio.ui.components.canvas/novel-render?","cljs.core.not_EQ_","portfolio.ui.components.canvas/enqueue-render-data","G__44947","G__44948","dumdom.core/component","portfolio.ui.components.canvas/Canvas","p__44949","map__44950","css-paths","script-paths","cljs.core.sort","cljs.core.concat","or__5045__auto__","G__44951","p__44953","map__44954","G__44952","portfolio.ui.components.canvas/Toolbar","buttons","iter__5523__auto__","s__44956","cljs.core/LazySeq","c__5521__auto__","size__5522__auto__","b__44958","cljs.core/chunk-buffer","i__44957","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__44955","cljs.core/cons","cljs.core/rest","cljs.core.comp","portfolio.ui.canvas.protocols/render-toolbar-button","s__44960","b__44962","i__44961","iter__44959","cljs.core.filter","G__44963","G__44964","portfolio.ui.components.canvas/CanvasPanel","button","portfolio.ui.components.triangle/TriangleButton","portfolio.ui.components.tab-bar/TabBar","G__44965","portfolio.ui.view/render-view","G__44966","p__44968","map__44969","G__44967","portfolio.ui.components.canvas/CanvasHeader","title","url","description","code","G__44971","portfolio.ui.components.markdown/Markdown","G__44976","portfolio.ui.components.code/Code","portfolio.ui.components.canvas/render-canvas","cljs.core/not-empty","cljs.core/select-keys","cljs.core/not","G__44978","portfolio.ui.components.error/Error","cljs.core/nil?","portfolio.ui.components.canvas/direction","G__44979","G__44980","portfolio.ui.components.canvas/WrappedMenuBar","menu-bar","G__44981","portfolio.ui.components.menu-bar/MenuBar","portfolio.ui.components.canvas/get-grid-styles","cljs.core.into","portfolio.ui.components.canvas/touch-x","G__44982","portfolio.ui.components.canvas/touch-y","G__44983","portfolio.ui.components.canvas/get-style-n","style","prop","js/parseInt","portfolio.ui.components.canvas/get-dim","props","js/window.getComputedStyle","portfolio.ui.components.canvas/set-size","size","portfolio.ui.components.canvas/set-offset","offset","portfolio.ui.components.canvas/get-neighbour","G__44984","p__44986","map__44987","G__44985","portfolio.ui.components.canvas/Handle","state","container","cljs.core/assoc","js/document.body","map__44994","dragging?","start","dim","neighbour-dim","neighbour","_e","cljs.core/dissoc","kind","portfolio.ui.components.canvas/render-hud","hud","portfolio.ui.components.hud.render_hud","G__44995","p__44997","map__44998","G__44996","portfolio.ui.components.canvas/Pane","toolbar","canvases","background","browser","handle","class-name","G__44999","G__45000","cljs.core.merge","portfolio.ui.components.browser/Browser","G__45001","cljs.core.map","G__45002","portfolio.ui.components.canvas/render-layout","G__45004","fexpr__45003","G__45005","G__45006","G__45007","portfolio.ui.components.canvas/CanvasView","G__45008","G__45009"],"sourcesContent":["(ns portfolio.ui.components.canvas\n  (:require [clojure.string :as str]\n            [dumdom.core :as d]\n            [portfolio.adapter :as adapter]\n            [portfolio.ui.actions :as actions]\n            [portfolio.ui.canvas.protocols :as canvas]\n            [portfolio.ui.components.browser :refer [Browser]]\n            [portfolio.ui.components.code :refer [Code]]\n            [portfolio.ui.components.error :refer [Error]]\n            [portfolio.ui.components.hud :as hud]\n            [portfolio.ui.components.markdown :refer [Markdown]]\n            [portfolio.ui.components.menu-bar :refer [MenuBar]]\n            [portfolio.ui.components.tab-bar :refer [TabBar]]\n            [portfolio.ui.components.triangle :refer [TriangleButton]]\n            [portfolio.ui.view :as view]))\n\n(defn get-iframe [canvas-el]\n  (some-> canvas-el (.querySelector \".canvas\")))\n\n(defn get-iframe-document [canvas-el]\n  (some-> canvas-el get-iframe .-contentWindow .-document))\n\n(defn get-iframe-body [canvas-el]\n  (some-> canvas-el get-iframe-document .-body))\n\n(defn report-error [cause e scene]\n  (actions/dispatch\n   (:report-render-error (:actions scene))\n   nil\n   {:action/exception e\n    :action/cause cause}))\n\n(defn render-scene [el {:keys [scene tools opt]}]\n  (let [iframe (get-iframe el)\n        canvas (some-> iframe .-contentDocument (.getElementById \"canvas\"))\n        error (.querySelector el \".error-container\")]\n    (when error\n      (.removeChild (.-parentNode error) error)\n      (set! (.. iframe -style -display) \"block\"))\n    (doseq [tool tools]\n      (try\n        (canvas/prepare-canvas tool el opt)\n        (catch :default e\n          (-> (str \"Failed to prepare canvas with \" (:id tool))\n              (report-error e scene)))))\n    (try\n      (adapter/render-component (assoc scene :component ((:component-fn scene))) canvas)\n      (js/setTimeout\n       (fn []\n         (doseq [tool tools]\n           (try\n             (canvas/finalize-canvas tool el opt)\n             (catch :default e\n               (-> (str \"Failed to finalize canvas with \" (:id tool))\n                   (report-error e scene)))))\n         (when-let [win (.-contentWindow iframe)]\n           (.postMessage\n            win\n            (clj->js {:event \"scene-rendered\"\n                      :scene-id (->> [(namespace (:id scene))\n                                      (name (:id scene))]\n                                     (remove empty?)\n                                     (str/join \"/\"))}) \"*\")))\n       50)\n      (catch :default e\n        (-> (str \"Failed to render \" (str \"'\" (:title scene) \"'\"))\n            (report-error e scene))))))\n\n(defn on-mounted [el f]\n  (if (some-> el .-contentDocument (.getElementById \"canvas\"))\n    (f)\n    (.addEventListener\n     el \"load\"\n     (fn [_]\n       (let [doc (->> el .-contentDocument)]\n         (set! (.. doc -documentElement -style -height) \"auto\")\n         (when-not (.getElementById doc \"canvas\")\n           (let [el (.createElement doc \"div\")]\n             (set! (.-id el) \"canvas\")\n             (.appendChild (.-body doc) el)))\n         (f))))))\n\n(defn init-canvas [el data f]\n  (let [iframe (get-iframe el)\n        document (get-iframe-document el)\n        head (.-head document)\n        loaded (atom 0)\n        target-n (+ (count (:css-paths data)) (count (:script-paths data)))\n        try-complete #(when (= target-n @loaded)\n                        (f))]\n    (set! (.-title document) \"Component scene\")\n    (.addEventListener\n     (.-contentWindow iframe)\n     \"message\"\n     (fn [e]\n       (js/window.postMessage (.-data e))))\n    (try-complete)\n\n    ;; Load CSS files\n    (doseq [path (:css-paths data)]\n      (let [link (js/document.createElement \"link\")]\n        (set! (.-rel link) \"stylesheet\")\n        (set! (.-type link) \"text/css\")\n        (set! (.-href link) path)\n        (.addEventListener\n         link \"load\"\n         (fn [_]\n           (swap! loaded inc)\n           (try-complete)))\n        (.appendChild head link)))\n\n    ;; Load scripts\n    (doseq [path (:script-paths data)]\n      (let [link (js/document.createElement \"script\")]\n        (set! (.-type link) \"text/javascript\")\n        (set! (.-src link) path)\n        (.addEventListener\n         link \"load\"\n         (fn [_]\n           (swap! loaded inc)\n           (try-complete)))\n        (.appendChild head link)))\n\n    ;; Set padding properties\n    (let [[t r b l] (:viewport/padding (:opt data))]\n      (when t (set! (.. document -body -style -paddingTop) (str t \"px\")))\n      (when r (set! (.. document -body -style -paddingBottom) (str r \"px\")))\n      (when b (set! (.. document -documentElement -style -paddingLeft) (str b \"px\")))\n      (when l (set! (.. document -documentElement -style -paddingRight) (str l \"px\"))))))\n\n(defn get-rendered-data [{:keys [scene opt]}]\n  {:rendered (:rendered-data scene)\n   :portfolio-options opt})\n\n(defn process-render-queue [el]\n  (when (.-renderFromQueue el)\n    (on-mounted\n     (get-iframe el)\n     #(when-let [data (.-renderQueue el)]\n        (set! (.-renderQueue el) nil)\n        (set! (.-renderedData el) (get-rendered-data data))\n        (render-scene el data)))))\n\n(defn novel-render? [el data]\n  (not= (.-renderedData el) (get-rendered-data data)))\n\n(defn enqueue-render-data [el data]\n  (when (novel-render? el data)\n    (set! (.-renderQueue el) data)\n    (process-render-queue el)))\n\n(d/defcomponent Canvas\n  :keyfn (fn [{:keys [css-paths script-paths]}]\n           ;; If either of these change, we need to remount the canvas\n           (str/join (sort (concat css-paths script-paths))))\n  :on-mount (fn [el data]\n              (set! (.-renderQueue el) data)\n              (on-mounted\n               (get-iframe el)\n               (fn []\n                 (init-canvas\n                  el data\n                  (fn []\n                    (set! (.-renderFromQueue el) true)\n                    (process-render-queue el))))))\n  :on-update (fn [el data]\n               (enqueue-render-data el data))\n  [data]\n  [:div {:style {:background (or (:background/background-color (:opt data))\n                                 \"var(--canvas-bg)\")\n                 :display \"flex\"\n                 :transition \"width 0.25s, height 0.25s\"}}\n   [:iframe.canvas\n    {:src (or (:canvas-path data) \"/portfolio/canvas.html\")\n     :title \"Component scene\"\n     :style {:border \"none\"\n             :flex-grow \"1\"\n             :width (or (when (number? (:viewport/width (:opt data)))\n                          (:viewport/width (:opt data)))\n                        \"100%\")\n             :height (when (number? (:viewport/height (:opt data)))\n                       (:viewport/height (:opt data)))}}]])\n\n(d/defcomponent Toolbar [{:keys [buttons]}]\n  [:nav {:style {:background \"var(--bg)\"\n                 :color \"var(--fg)\"\n                 :border-bottom \"1px solid var(--separator)\"\n                 :display \"flex\"\n                 :gap 10\n                 :justify-content \"space-between\"\n                 :min-height 48\n                 :padding-left 20\n                 :padding-right 20}}\n   [:div {:style {:display \"flex\"\n                  :align-items \"center\"\n                  :gap 10}}\n    (for [tool (remove (comp #{:right} :align) buttons)]\n      (canvas/render-toolbar-button tool))]\n   [:div {:style {:display \"flex\"\n                  :align-items \"center\"\n                  :gap 10}}\n    (for [tool (filter (comp #{:right} :align) buttons)]\n      (canvas/render-toolbar-button tool))]])\n\n(d/defcomponent CanvasPanel [data]\n  [:div {:style {:border-top \"1px solid #ccc\"\n                 :background \"#ffffff\"\n                 :height (if (:minimized? data) \"40px\" \"30%\")\n                 :transition \"height 0.25s\"\n                 :position \"relative\"}}\n   (when-let [button (:button data)]\n     [:div {:style {:position \"absolute\"\n                    :right 20\n                    :top 10}}\n      (TriangleButton button)])\n   (TabBar data)\n   (some-> data :content view/render-view)])\n\n(d/defcomponent CanvasHeader\n  :keyfn :title\n  [{:keys [title url description code]}]\n  [:div {:style {:margin \"20px\"}}\n   [:h2.h3 {:style (when-not (empty? description)\n                     {:margin \"0 0 10px\"})}\n    (if url\n      [:a {:href url} title]\n      title)]\n   (when-not (empty? description)\n     (Markdown {:markdown description\n                :tag :p}))\n   (when-not (empty? code)\n     [:div {:style {:margin \"20px 0\"}}\n      [:h3.h4 {:style {:margin \"10px 0\"}}\n       \"Scene code\"]\n      (Code {:code code})])])\n\n(defn render-canvas [data]\n  [:div.canvas-wrapper\n   (->> [(when (not-empty (select-keys data [:title :description :code]))\n           (CanvasHeader data))\n         (when (:scene data)\n           (if (or (not (:component-fn (:scene data)))\n                   (:error (:scene data)))\n             (Error (:error (:scene data)))\n             (Canvas data)))]\n        (remove nil?))])\n\n(def direction\n  {:rows \"column\"\n   :cols \"row\"})\n\n(d/defcomponent WrappedMenuBar [menu-bar]\n  [:div\n   {:style {:background \"var(--bg)\"\n            :color \"var(--fg)\"\n            :padding \"10px 20px\"}}\n   (MenuBar (assoc menu-bar :size :small))])\n\n(defn get-grid-styles [data]\n  (into {:position \"absolute\"\n         :overflow \"hidden\"}\n        (if (:height data)\n          {:left 0\n           :right 0\n           :top (:offset data)\n           :height (:height data)}\n          {:top 0\n           :bottom 0\n           :left (:offset data)\n           :width (:width data)})))\n\n(defn- touch-x [e]\n  (or (some-> e .-changedTouches (aget 0) .-screenX)\n      (.-screenX e)))\n\n(defn- touch-y [e]\n  (or (some-> e .-changedTouches (aget 0) .-screenY)\n      (.-screenY e)))\n\n(defn get-style-n [style prop]\n  (js/parseInt (.getPropertyValue style prop) 10))\n\n(defn get-dim [props el]\n  (let [style (js/window.getComputedStyle el)]\n    (if (= :horizontal (:kind props))\n      {:size (get-style-n style \"height\")\n       :offset (get-style-n style \"top\")}\n      {:size (get-style-n style \"width\")\n       :offset (get-style-n style \"left\")})))\n\n(defn set-size [props el size]\n  (if (= :horizontal (:kind props))\n    (set! (.. el -style -height) (str size \"px\"))\n    (set! (.. el -style -width) (str size \"px\"))))\n\n(defn set-offset [props el offset]\n  (if (= :horizontal (:kind props))\n    (set! (.. el -style -top) (str offset \"px\"))\n    (set! (.. el -style -left) (str offset \"px\"))))\n\n(defn get-neighbour [el]\n  (.-nextSibling el))\n\n(d/defcomponent Handle\n  :on-mount (fn [el props]\n              (let [state (atom {})\n                    f (if (= :horizontal (:kind props)) touch-y touch-x)\n                    container (.-parentNode el)]\n\n                (.addEventListener\n                 el \"mousedown\"\n                 (fn [e]\n                   (swap! state assoc\n                          :dragging? true\n                          :start (f e)\n                          :dim (get-dim props container)\n                          :neighbour-dim (get-dim props (get-neighbour container)))\n                   (.preventDefault e)\n                   (.add (.-classList el) \"dragging\")))\n\n                (.addEventListener\n                 js/document.body\n                 \"mousemove\"\n                 (fn [e]\n                   (let [{:keys [dragging? start dim neighbour-dim]} @state]\n                     (when dragging?\n                       (let [offset (- (f e) start)\n                             neighbour (get-neighbour container)]\n                         (set-size props container (+ (:size dim) offset))\n                         (set-offset props neighbour (+ (:offset neighbour-dim) offset))\n                         (set-size props neighbour (- (:size neighbour-dim) offset)))))))\n\n                (.addEventListener\n                 js/document.body\n                 \"mouseup\"\n                 (fn [_e]\n                   (when (:dragging? @state)\n                     (swap! state dissoc :dragging?)\n                     (.remove (.-classList el) \"dragging\"))))))\n  [{:keys [kind]}]\n  [:div.draggable {:style (if (= :horizontal kind)\n                            {:border-bottom \"3px solid var(--hard-separator)\"\n                             :padding-top 30\n                             :position \"absolute\"\n                             :bottom 0\n                             :left 0\n                             :right 0}\n                            {:position \"absolute\"\n                             :border-right \"3px solid var(--hard-separator)\"\n                             :padding-left 20\n                             :right 0\n                             :top 0\n                             :bottom 0})}])\n\n(defn render-hud [hud]\n  (hud/render-hud\n   {:action (:action hud)\n    :style {:position \"absolute\"\n            :bottom 20\n            :left 20\n            :right 20}}\n   (when-let [error (:error hud)]\n     (Error error))))\n\n(d/defcomponent Pane\n  :keyfn :id\n  [{:keys [toolbar canvases title description background menu-bar browser handle class-name] :as data}]\n  [:div.pane\n   {:style (into (get-grid-styles data)\n                 {:min-height \"100%\"\n                  :display \"flex\"\n                  :flex-direction \"column\"})}\n   (some-> toolbar Toolbar)\n   (some-> menu-bar WrappedMenuBar)\n   [:div {:style (merge {:overflow \"auto\"\n                         :flex-grow 1\n                         :transition \"background 0.15s\"\n                         :background background})\n          :class (if (:items browser)\n                   :dark\n                   class-name)}\n    (when (:items browser)\n      (Browser browser))\n    (when (or title description)\n      [:div {:style {:margin \"20px\"}}\n       (when title\n         [:h1.h1 title])\n       (when description\n         (Markdown {:markdown description}))])\n    (when (seq canvases)\n      (map render-canvas canvases))]\n   (some-> handle Handle)])\n\n(defn render-layout [data]\n  (if (#{:rows :cols} (:kind data))\n    [:div {:style (get-grid-styles data)\n           :class (:kind data)}\n     (map render-layout (:xs data))\n     (some-> (:handle data) Handle)]\n    (Pane data)))\n\n(d/defcomponent CanvasView\n  :keyfn :id\n  [data]\n  [:div {:style {:flex-grow 1\n                 :display \"flex\"\n                 :flex-direction \"column\"}}\n   [:div {:style {:flex-grow 1\n                  :position \"relative\"}}\n    (render-layout data)]\n   (some-> data :hud render-hud)\n   (some-> data :panel CanvasPanel)])\n"],"x_google_ignoreList":[0]}