{"version":3,"sources":["portfolio/ui/docs.cljs"],"mappings":";AAIA;;;;;8BAAA,9BAAMA,oEAIHC;AAJH,AAKE,iCAAA,1BAACC,uBAAYD,gCAAgC,CAAA,0EAAA,1BAASE;;AAExD;;;;;;+BAAA,/BAAMC,sEAKHH;AALH,AAME,iCAAA,1BAACC,uBAAYD,yBAAyB;;AAExC;;;qCAAA,rCAAMI,kFAEHJ;AAFH,AAGE,iCAAA,1BAACC,uBAAYD,gCAA+B;;AAE9C,kCAAA,lCAAMK,4EAAYC;AAAlB,AAAA,kDAAA,qDAAA,6DAAA,6DAEa,oBAAA,mCAAA,6BAAA,4BAAK,kDAAA,lDAACC,uDAAcD,nFACfP,7BACAI,nCACAC,pBACAI;;AAElB,gCAAA,hCAAMC,wEAAaC;AAAnB,AACE,IAAMJ,QAAM,AAACK,2BAAgB,AAACH,oBAASE;AAAvC,AACE,IAAAE,qBAAmB,kBAAA,lBAACK,+BAAsB,AAACC,gBAAMZ;AAAjD,AAAA,oBAAAM;AAAA,IAAAC,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAAUE;YAAV,AAAAD,4CAAAD,WAAA,IAAA,nEAAYG;AAAZ,AAAA,kDAAA,4DAAA,6DAAA,nEACUA,sJACI,AAACX,gCAAW,AAACc,eAAKb;;AAFhC,kDAAA,6DAAA,mFAGc,AAACD,gCAAWC","names":["portfolio.ui.docs/fix-links","md","clojure.string/replace","js/window.location.pathname","portfolio.ui.docs/fix-images","portfolio.ui.docs/fix-source-links","portfolio.ui.docs/->markdown","lines","clojure.string.join","clojure.string/trim","portfolio.ui.docs/prepare-doc","doc","clojure.string/split-lines","temp__5802__auto__","vec__44306","cljs.core.nth","_","title","cljs.core/re-find","cljs.core/first","cljs.core/next"],"sourcesContent":["(ns portfolio.ui.docs\n  (:require [clojure.string :as str])\n  (:require-macros [portfolio.ui.docs]))\n\n(defn fix-links\n  \"Source markdown uses relative file paths for links to other documents, so\n  documentation is also browsable on Github. This function changes those links\n  to something that can be navigated by the Portfolio app.\"\n  [md]\n  (str/replace md #\"\\(\\./(.+)\\.md(#[^\\)]+)?\\)\" (str \"(\" js/window.location.pathname \"?doc=$1$2)\")))\n\n(defn fix-images\n  \"Source markdown uses relative file paths for images so they render on Github.\n  It's hard for Portfolio to ensure that these images are available as resources\n  over HTTP in the local setup, so it instead serves them from Github in the\n  Portfolio UI.\"\n  [md]\n  (str/replace md #\"\\./([^\\)\\\"]+\\.png)\" (str \"https://github.com/cjohansen/portfolio/blob/main/docs/portfolio/$1?raw=true\")))\n\n(defn fix-source-links\n  \"Direct source file links to Github\"\n  [md]\n  (str/replace md #\"\\(../../([^\\)]+\\.cljs)\\)\" (str \"(https://github.com/cjohansen/portfolio/blob/main/$1)\")))\n\n(defn ->markdown [lines]\n  {:kind :markdown\n   :markdown (->> (str/join \"\\n\" lines)\n                  fix-links\n                  fix-images\n                  fix-source-links\n                  str/trim)})\n\n(defn prepare-doc [doc]\n  (let [lines (str/split-lines (str/trim doc))]\n    (if-let [[_ title] (re-find #\"^#[^#](.*)\" (first lines))]\n      {:title title\n       :sections [(->markdown (next lines))]}\n      {:sections [(->markdown lines)]})))\n"],"x_google_ignoreList":[0]}