{"version":3,"sources":["portfolio/ui/canvas/background.cljs"],"mappings":"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","names":["portfolio.ui.canvas.background/default-options","p__45012","map__45013","cljs.core/--destructure-map","cljs.core.get","portfolio.ui.canvas.background/prepare-canvas","data","el","background-color","body-class","document-class","portfolio.ui.components.canvas/get-iframe","body","portfolio.ui.components.canvas/get-iframe-body","seq__45017","cljs.core/seq","chunk__45018","count__45019","i__45020","map__45052","temp__5804__auto__","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","map__45071","cljs.core/first","cljs.core/next","value","cljs.core/empty?","cljs.core._EQ_","portfolio.ui.canvas.background/create-background-tool","config","options","or__5045__auto__","portfolio.ui.canvas.addons/create-toolbar-menu-button","phosphor.icons/load-icon!","id","cljs.core.filter","cljs.core.comp"],"sourcesContent":["(ns portfolio.ui.canvas.background\n  (:require [phosphor.icons :as icons]\n            [portfolio.ui.canvas.addons :as addons]\n            [portfolio.ui.components.canvas :as canvas]))\n\n(def default-options\n  [{:id :light-mode\n    :title \"Light (.light-mode)\"\n    :value {:background/background-color \"#fff\"\n            :background/document-class \"light-mode\"\n            :background/body-class \"light-mode\"}}\n   {:id :dark-mode\n    :title \"Dark (.dark-mode)\"\n    :value {:background/background-color \"#111111\"\n            :background/document-class \"dark-mode\"\n            :background/body-class \"dark-mode\"}}])\n\n(defn prepare-canvas [data el {:background/keys [background-color body-class document-class]}]\n  (set! (.. (canvas/get-iframe el) -style -backgroundColor) background-color)\n  (let [body (canvas/get-iframe-body el)]\n    (doseq [{:keys [value]} (:options data)]\n      (when-not (empty? (:background/body-class value))\n        (if (= body-class (:background/body-class value))\n          (.add (.-classList body) (:background/body-class value))\n          (.remove (.-classList body) (:background/body-class value))))\n      (when-not (empty? (:background/document-class value))\n        (if (= document-class (:background/document-class value))\n          (.add (.-classList (.-parentNode body)) (:background/document-class value))\n          (.remove (.-classList (.-parentNode body)) (:background/document-class value)))))))\n\n(defn create-background-tool [config]\n  (let [options (or (:background/options config) default-options)]\n    (addons/create-toolbar-menu-button\n     {:id :canvas/background\n      :persist? true\n      :title \"Background\"\n      :icon (icons/icon :phosphor.regular/palette)\n      :options (or (:background/options config) options)\n      :default-value (->> (or (when-let [id (:background/default-option-id config)]\n                                (filter (comp #{id} :id) options))\n                              options)\n                          first\n                          :value)\n      :prepare-canvas #'prepare-canvas})))\n"],"x_google_ignoreList":[0]}