{"version":3,"sources":["portfolio/ui/color.cljs"],"mappings":"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","names":["portfolio.ui.color/hex->rgba","hex","vec__44738","cljs.core.nth","r","g","b","a","cljs.core.take","cljs.core.concat","p1__44733#","cljs.core.map","js/parseInt","G__44745","fexpr__44744","cljs.core/count","p1__44734#","cljs.core/re-seq","portfolio.ui.color/rgb-re","portfolio.ui.color/rgba-re","portfolio.ui.color/perceived-rgb","bg","rgb-or-rgba","cljs.core._EQ_","vec__44751","vec__44754","bg-r","bg-g","bg-b","fg-r","fg-g","fg-b","bg-a","portfolio.ui.color/rgba-str->rgb","color","cljs.core/re-find","cljs.core.drop","p1__44757#","js/parseFloat","p1__44758#","portfolio.ui.color/->rgb","portfolio.ui.color/pct","decimal","js/Math.floor","portfolio.ui.color/round","n","portfolio.ui.color/rgb->hsl","rgb","vec__44760","p1__44759#","minv","x__5133__auto__","y__5134__auto__","maxv","x__5130__auto__","y__5131__auto__","diff","luminace","js/Math.ceil","saturation","hue"],"sourcesContent":["(ns portfolio.ui.color)\n\n(defn hex->rgba [hex]\n  (let [[r g b a]\n        (take 4\n              (concat\n               (map #(js/parseInt % 16)\n                    (if (#{4 5} (count hex))\n                      (map #(str % %) (re-seq #\"[^#]\" hex))\n                      (re-seq #\"[^#]{2}\" hex)))\n               [255]))]\n    [r g b (/ a 255)]))\n\n(def rgb-re #\"rgb\\((\\d+), (\\d+), (\\d+)\\)\")\n(def rgba-re #\"rgba\\((\\d+), (\\d+), (\\d+), (.*)\\)\")\n\n(defn perceived-rgb [bg rgb-or-rgba]\n  (if (= 3 (count rgb-or-rgba))\n    rgb-or-rgba\n    (let [[bg-r bg-g bg-b] bg\n          [fg-r fg-g fg-b a] rgb-or-rgba\n          bg-a (- 1 a)]\n      [(int (+ (* bg-r bg-a) (* fg-r a)))\n       (int (+ (* bg-g bg-a) (* fg-g a)))\n       (int (+ (* bg-b bg-a) (* fg-b a)))])))\n\n(defn rgba-str->rgb [color]\n  (if (re-find rgba-re color)\n    (->> (re-find rgba-re color)\n         (drop 1)\n         (map #(js/parseFloat %))\n         (perceived-rgb [255 255 255]))\n    (->> (re-find rgb-re color)\n         (drop 1)\n         (take 3)\n         (map #(js/parseInt % 10)))))\n\n(defn ->rgb [color]\n  (if (re-find #\"#.+\" color)\n    (perceived-rgb [255 255 255] (hex->rgba color))\n    (rgba-str->rgb color)))\n\n(defn- pct [decimal]\n  (js/Math.floor (* decimal 100)))\n\n(defn- round [n]\n  (/ (pct n) 100))\n\n(defn rgb->hsl [rgb]\n  (let [[r g b] (map #(round (/ % 255.0)) rgb)\n        minv (min r g b)\n        maxv (max r g b)\n        diff (- maxv minv)\n        luminace (js/Math.ceil (* 100 (/ (+ maxv minv) 2)))\n        saturation (pct\n                    (cond\n                      (= minv maxv) 0\n                      (< luminace 50) (/ diff (+ maxv minv))\n                      :else (/ diff (- 2 maxv minv))))\n        hue (if (= saturation 0)\n              0\n              (js/Math.ceil\n               (* 60 (cond\n                       (= maxv r) (/ (- g b) diff)\n                       (= maxv g) (+ 2 (/ (- b r) diff))\n                       (= maxv b) (+ 4 (/ (- r g) diff))))))]\n    {:h hue\n     :s saturation\n     :l luminace}))\n\n(comment\n  (rgb->hsl (->rgb \"#212227\"))\n  (rgb->hsl (->rgb \"#555555\"))\n  (rgb->hsl (->rgb \"#777777\"))\n  (rgb->hsl (->rgb \"#fff\"))\n  )\n"],"x_google_ignoreList":[0]}